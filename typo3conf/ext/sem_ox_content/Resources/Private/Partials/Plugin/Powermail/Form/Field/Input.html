<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:vh="http://typo3.org/ns/In2code/Powermail/ViewHelpers" data-namespace-typo3-fluid="true">

<div
    class="form-group powermail_fieldwrap powermail_fieldwrap_type_input powermail_fieldwrap_{field.marker} {field.css}
            {settings.styles.framework.fieldAndLabelWrappingClasses} {vh:Validation.ErrorClass(field:field, class:'contact_form_error')}">
    <label for="powermail_field_{field.marker}" class="{settings.styles.framework.labelClasses}"
           title="{field.description}">
        <vh:string.RawAndRemoveXss>{field.title}</vh:string.RawAndRemoveXss>
        <f:if condition="{field.mandatory}"><span class="mandatory">*</span></f:if>
    </label>
    <f:form.validationResults>
        <f:if condition="{validationResults.flattenedErrors}">
            <f:for each="{validationResults.flattenedErrors}" as="errors">
                <f:for each="{errors}" as="singleError">
                    <f:if condition="{singleError.code}=={field.marker}">
                        <div class="error_message">
                            <f:translate key="validationerror_{singleError.message}">{singleError.message}</f:translate>
                        </div>
                    </f:if>
                </f:for>
            </f:for>
        </f:if>

        <div class="{settings.styles.framework.fieldWrappingClasses}">
            <f:form.textfield
                type="{vh:Validation.FieldTypeFromValidation(field:field)}"
                property="{field.marker}"
                placeholder="{field.placeholder}{f:if(condition: field.mandatory, then: ' *')}"
                value="{vh:Misc.PrefillField(field:field, mail:mail)}"
                class="form-control powermail_input {settings.styles.framework.fieldClasses} {vh:Validation.ErrorClass(field:field, class:'powermail_field_error')}"
                additionalAttributes="{vh:Validation.ValidationDataAttribute(field:field)}"
                id="powermail_field_{field.marker}"/>
        </div>
    </f:form.validationResults>
</div>

</html>